{"ast":null,"code":"import React from'react';import tabelaGear from'./tableGear';import{trackEvent}from'./analytics';Date.prototype.addDays=function(days){var date=new Date(this.valueOf());date.setDate(date.getDate()+days);return date;};function DateToStringFormated(date){return date.toLocaleDateString(\"pt\",{day:\"2-digit\",month:'short'}).replace(\" de \",\"/\").replace(\".\",\"\");//  Remove period on end of month at Chrome browser;\n}function isSameDay(dateToCheck,dateToCheck2){return dateToCheck.getDate()===dateToCheck2.getDate()&&dateToCheck.getMonth()===dateToCheck2.getMonth()&&dateToCheck.getFullYear()===dateToCheck2.getFullYear();}function isToday(dateToCheck){return isSameDay(dateToCheck,new Date());}const weekDay=[\"Dom\",\"Seg\",\"Ter\",\"Qua\",\"Qui\",\"Sex\",\"Sáb\"];const styleClassDay=function styleClassDay(inProp){let redThing=['F',0,6];return redThing.includes(inProp)?\"tdF\":\"\";};const styleClassWeekDay=function styleClassWeekDay(inProp){let trClassList={0:'trSunday',1:'trMonday',2:'trTuesday',3:'trWednesday',4:'trThursday',5:'trFriday',6:'trSaturday'};return trClassList[inProp.getDay()];};const styleClassToday=function styleClassToday(inProp){return isToday(inProp)?\"tdToday\":\"\";};const eventClick=function eventClick(inLog){console.log(\"Click:\"+inLog);trackEvent('Click',inLog,'label2');return true;};const yearTD=day=>/*#__PURE__*/React.createElement(\"th\",{className:'tdDate',onClick:()=>eventClick(\"Ano\"+day.getFullYear())},day.getFullYear());const weekDayTD=day=>{let wd=day.getDay();let weekLabel=weekDay[wd].toUpperCase();return/*#__PURE__*/React.createElement(\"td\",{className:[styleClassDay(wd),'tdWeekCol'].join(' ')},weekLabel);};const dayTDfunc=day=>day.schedule.map((scale,i)=>/*#__PURE__*/React.createElement(\"td\",{key:i,className:['tdDayCol'+i,styleClassDay(scale)].join(' ')},scale));function thGroupClick(i,groupName){//alert(i + 'aab:' + groupName);\nlet shadesEl=document.querySelectorAll('.tdDayCol'+i).forEach(function(el){el.classList.toggle('backSelected');});eventClick(\"Grupo \"+groupName);}const groupsTD=groups=>groups.map((groupName,i)=>/*#__PURE__*/React.createElement(\"th\",{key:i,onClick:()=>{thGroupClick(i,groupName);}},groupName));const daysTR=daysIn=>daysIn.map((day,i)=>/*#__PURE__*/React.createElement(\"tr\",{key:i,className:[styleClassWeekDay(day.day),'trTable'].join(' ')},/*#__PURE__*/React.createElement(\"td\",{key:i,className:['tdDate',styleClassToday(day.day)].join(' ')},\" \",DateToStringFormated(day.day)),weekDayTD(day.day),dayTDfunc(day)));/* <th>{objMonthScales[0].day.toLocaleDateString(\"pt\")}</th> */const monthTRHeader=objMonthScales=>/*#__PURE__*/React.createElement(\"tr\",{className:'trHead'},yearTD(objMonthScales[0].day),/*#__PURE__*/React.createElement(\"th\",null,\"\\xA0\"),groupsTD(objMonthScales[0].groups));const monthTRsComplete=daysIn=>[monthTRHeader(daysIn),daysTR(daysIn)];const tBodyTable=monthsTRsIn=>/*#__PURE__*/React.createElement(\"tbody\",null,monthsTRsIn);function getDistFromBottom(){var scrollPosition=window.pageYOffset;var windowSize=window.innerHeight;var bodyHeight=document.body.offsetHeight;return Math.max(bodyHeight-(scrollPosition+windowSize),0);}class Tabela2 extends React.Component{constructor(props){super(props);const tableName=this.props.tableName;this.setState({tableEra:tableName});this.initTableComponent();}initTableComponent(){const tableName=this.props.tableName;tabelaGear.populateTableDate(tableName);const dateIn=new Date();// GetToday\nconst days=tabelaGear.getMonthScales(dateIn);let beforeFirstMonthDay=new Date(dateIn.getFullYear(),dateIn.getMonth()-1,1);let daysbefore=tabelaGear.getMonthScales(beforeFirstMonthDay);this.state={tableInput:tableName,dayOne:dateIn,actualDay:dateIn,monthsTRs:[monthTRsComplete(daysbefore),monthTRsComplete(days)]};}tick(){const dateIn=this.state.actualDay;let nextFirstMonthDay=new Date(dateIn.getFullYear(),dateIn.getMonth()+1,1);let nextMonthScale=tabelaGear.getMonthScales(nextFirstMonthDay);this.setState({monthsTRs:[...this.state.monthsTRs,monthTRsComplete(nextMonthScale)],actualDay:nextFirstMonthDay});// Track month loading\nlet trackAction=dateIn.getFullYear()+\"-\"+(dateIn.getMonth()+1);console.log(trackAction);trackEvent('Navigation',trackAction,'label3');}handleScroll(){let distToBottom=getDistFromBottom();if(distToBottom>0&&distToBottom<=1400){// Near end;\nlet extTick=this.tick.bind(this);extTick();}}componentDidMount(){//console.log(this.props.groupSelected);\nlet txtGroupSeleced=this.props.groupSelected;if(txtGroupSeleced!=undefined){var xpath=\"//th[text()='\"+txtGroupSeleced+\"']\";var matchingElement=document.evaluate(xpath,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;matchingElement.click();console.log(\"Mathing\");console.log(matchingElement);}document.addEventListener('scroll',this.handleScroll.bind(this));let timer=setTimeout(function(){// Wait 50ms and set scrool to TODAY\nwindow.scrollTo(0,document.getElementsByClassName(\"tdToday\")[0].offsetTop-135);//era 88 \n},50);let extTick=this.tick.bind(this);// To use method in next line\nextTick();// Load next month as DidMount.\n}componentDidUpdate(prevProps){if(this.props.tableName!==prevProps.tableName){this.initTableComponent();let extTick=this.tick.bind(this);extTick();}}render(){return/*#__PURE__*/ (/* <div className=\"tbContainer\">*/React.createElement(\"table\",{className:'tbMain'},tBodyTable(this.state.monthsTRs))/*</div>*/);}}export default Tabela2;","map":{"version":3,"sources":["/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/src/tabela2.js"],"names":["React","tabelaGear","trackEvent","Date","prototype","addDays","days","date","valueOf","setDate","getDate","DateToStringFormated","toLocaleDateString","day","month","replace","isSameDay","dateToCheck","dateToCheck2","getMonth","getFullYear","isToday","weekDay","styleClassDay","inProp","redThing","includes","styleClassWeekDay","trClassList","getDay","styleClassToday","eventClick","inLog","console","log","yearTD","weekDayTD","wd","weekLabel","toUpperCase","join","dayTDfunc","schedule","map","scale","i","thGroupClick","groupName","shadesEl","document","querySelectorAll","forEach","el","classList","toggle","groupsTD","groups","daysTR","daysIn","monthTRHeader","objMonthScales","monthTRsComplete","tBodyTable","monthsTRsIn","getDistFromBottom","scrollPosition","window","pageYOffset","windowSize","innerHeight","bodyHeight","body","offsetHeight","Math","max","Tabela2","Component","constructor","props","tableName","setState","tableEra","initTableComponent","populateTableDate","dateIn","getMonthScales","beforeFirstMonthDay","daysbefore","state","tableInput","dayOne","actualDay","monthsTRs","tick","nextFirstMonthDay","nextMonthScale","trackAction","handleScroll","distToBottom","extTick","bind","componentDidMount","txtGroupSeleced","groupSelected","undefined","xpath","matchingElement","evaluate","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","click","addEventListener","timer","setTimeout","scrollTo","getElementsByClassName","offsetTop","componentDidUpdate","prevProps","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport tabelaGear from './tableGear';\nimport { trackEvent } from './analytics';\n\n\n\n\nDate.prototype.addDays = function(days) {\n    var date = new Date(this.valueOf());\n    date.setDate(date.getDate() + days);\n    return date;\n}\n\nfunction DateToStringFormated(date) {\n    return date.toLocaleDateString(\"pt\", {\n        day: \"2-digit\",\n        month: 'short'\n    }).replace(\" de \", \"/\")\n      .replace(\".\",\"\"); //  Remove period on end of month at Chrome browser;\n}\n\nfunction isSameDay(dateToCheck, dateToCheck2) {\n    return (dateToCheck.getDate() === dateToCheck2.getDate() \n        && dateToCheck.getMonth() === dateToCheck2.getMonth()\n        && dateToCheck.getFullYear() === dateToCheck2.getFullYear());\n}\n\nfunction isToday(dateToCheck) {\n    return isSameDay(dateToCheck, (new Date()));\n}\n\nconst weekDay = [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sáb\"];\n\nconst styleClassDay = function(inProp) {\n    let redThing = ['F', 0, 6];\n    return redThing.includes(inProp) ? \"tdF\" : \"\";\n};\n\nconst styleClassWeekDay = function(inProp) {\n    let trClassList = {0: 'trSunday', 1: 'trMonday', 2: 'trTuesday', 3: 'trWednesday', 4: 'trThursday', 5: 'trFriday', 6: 'trSaturday'};\n    return trClassList[inProp.getDay()]\n};\nconst styleClassToday = function(inProp) {\n    return isToday(inProp) ? \"tdToday\": \"\";\n}\nconst eventClick = function(inLog) {\n    console.log(\"Click:\" + inLog);\n    trackEvent('Click', inLog, 'label2');\n    return true;\n}\nconst yearTD = (day) => <th className={'tdDate'} onClick={() => eventClick(\"Ano\"+day.getFullYear())}>{day.getFullYear()}</th>;\nconst weekDayTD = (day) => {           \n    let wd = day.getDay();\n    let weekLabel = weekDay[wd].toUpperCase();\n    return <td className={[styleClassDay(wd), 'tdWeekCol'].join(' ')}>{weekLabel}</td>\n}\nconst dayTDfunc = (day) =>\n            day.schedule.map(\n                (scale, i) => \n                    <td key={i} className={['tdDayCol' + i, styleClassDay(scale)].join(' ')}>{scale}</td>\n            );\n\nfunction thGroupClick(i, groupName) {\n    //alert(i + 'aab:' + groupName);\n    let shadesEl = document.querySelectorAll('.tdDayCol' + i).forEach(function (el) {\n        el.classList.toggle('backSelected');\n    });\n    eventClick(\"Grupo \"+groupName);\n    \n} \n\nconst groupsTD = (groups) => \n    groups.map((groupName, i) =>\n        <th key={i} onClick={() => { thGroupClick(i, groupName); }}>{groupName}</th>\n    );\n\nconst daysTR = (daysIn) => daysIn.map((day, i) =>\n    <tr key={i} className={[styleClassWeekDay(day.day), 'trTable'].join(' ')}>\n    <td key={i} className={['tdDate', styleClassToday(day.day)].join(' ')} > {DateToStringFormated(day.day)}</td> \n        {weekDayTD(day.day)} \n        {dayTDfunc(day)} \n    </tr>\n);\n\n/* <th>{objMonthScales[0].day.toLocaleDateString(\"pt\")}</th> */\nconst monthTRHeader = (objMonthScales) =>\n    (   \n        <tr className={'trHead'}>\n            {yearTD(objMonthScales[0].day)}\n            <th>&nbsp;</th> \n            {groupsTD(objMonthScales[0].groups)} \n        </tr> \n        \n    );\nconst monthTRsComplete = (daysIn) => ([monthTRHeader(daysIn), daysTR(daysIn)]);\nconst tBodyTable = (monthsTRsIn) =>  (<tbody>{monthsTRsIn}</tbody>)\n\n\nfunction getDistFromBottom () {\n  \n    var scrollPosition = window.pageYOffset;\n    var windowSize     = window.innerHeight;\n    var bodyHeight     = document.body.offsetHeight;\n    return Math.max(bodyHeight - (scrollPosition + windowSize), 0);  \n  }\n\n\nclass Tabela2 extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        const { tableName } = this.props;\n        this.setState({tableEra: tableName});\n        this.initTableComponent();\n\n    }\n\n    initTableComponent() {\n        const tableName = this.props.tableName;\n        \n        tabelaGear.populateTableDate(tableName);\n        const dateIn = new Date(); // GetToday\n        const days = tabelaGear.getMonthScales(dateIn);\n\n        let beforeFirstMonthDay = new Date(dateIn.getFullYear(), dateIn.getMonth()-1, 1);\n        let daysbefore = tabelaGear.getMonthScales(beforeFirstMonthDay);\n\n        this.state = { \n            tableInput: tableName,\n            dayOne: dateIn,\n            actualDay: dateIn,\n            monthsTRs: [monthTRsComplete(daysbefore), monthTRsComplete(days)],\n        }\n    }\n\n    tick()   {\n        const dateIn = this.state.actualDay;\n        let nextFirstMonthDay = new Date(dateIn.getFullYear(), dateIn.getMonth()+1, 1);\n        let nextMonthScale = tabelaGear.getMonthScales(nextFirstMonthDay);\n\n        this.setState({\n            monthsTRs: [\n                ...this.state.monthsTRs,\n                monthTRsComplete(nextMonthScale)\n             ],\n             actualDay: nextFirstMonthDay\n         });\n        \n        // Track month loading\n        let trackAction = dateIn.getFullYear()+\"-\"+(dateIn.getMonth()+1);\n        console.log(trackAction);\n        trackEvent('Navigation', trackAction, 'label3');   \n     }\n\n     handleScroll() {\n        let distToBottom = getDistFromBottom();\n        if (distToBottom > 0 && distToBottom <= 1400) { // Near end;\n            let extTick = this.tick.bind(this);\n            extTick();\n        }\n     }\n\n    componentDidMount() {\n\n        //console.log(this.props.groupSelected);\n        \n        let txtGroupSeleced = this.props.groupSelected;\n        if (txtGroupSeleced != undefined) {\n            var xpath = \"//th[text()='\" + txtGroupSeleced + \"']\";\n            var matchingElement = document.evaluate(xpath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n            matchingElement.click();\n            console.log(\"Mathing\");\n            console.log(matchingElement);\n        }\n        \n        document.addEventListener('scroll', this.handleScroll.bind(this));\n    \n        let timer = setTimeout(function () { // Wait 50ms and set scrool to TODAY\n            window.scrollTo(0, document.getElementsByClassName(\"tdToday\")[0].offsetTop - 135); //era 88 \n        }, 50);\n        \n        let extTick = this.tick.bind(this); // To use method in next line\n        extTick(); // Load next month as DidMount.\n    }\n\n    \n    componentDidUpdate(prevProps) {\n        if (this.props.tableName !== prevProps.tableName) {\n          this.initTableComponent();\n          let extTick = this.tick.bind(this);\n          extTick();\n        }\n      }\n\n    render() {  \n\n        return ( \n            /* <div className=\"tbContainer\">*/\n            <table className={'tbMain'}>\n                {tBodyTable(this.state.monthsTRs)}\n            </table>\n            /*</div>*/\n        )\n    }\n}\n\n\nTabela2.propTypes = {\n    //classes: PropTypes.object.isRequired,\n};\n\n\nexport default Tabela2;"]},"metadata":{},"sourceType":"module"}