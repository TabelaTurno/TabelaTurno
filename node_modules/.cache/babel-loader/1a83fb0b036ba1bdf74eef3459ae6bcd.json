{"ast":null,"code":"import _toConsumableArray from \"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/src/tabela2.js\";\nimport React from 'react';\nimport tabelaGear from './tableGear';\nimport { trackEvent } from './analytics';\n\nDate.prototype.addDays = function (days) {\n  var date = new Date(this.valueOf());\n  date.setDate(date.getDate() + days);\n  return date;\n};\n\nfunction DateToStringFormated(date) {\n  return date.toLocaleDateString(\"pt\", {\n    day: \"2-digit\",\n    month: 'short'\n  }).replace(\" de \", \"/\").replace(\".\", \"\"); //  Remove period on end of month at Chrome browser;\n}\n\nfunction isSameDay(dateToCheck, dateToCheck2) {\n  return dateToCheck.getDate() === dateToCheck2.getDate() && dateToCheck.getMonth() === dateToCheck2.getMonth() && dateToCheck.getFullYear() === dateToCheck2.getFullYear();\n}\n\nfunction isToday(dateToCheck) {\n  return isSameDay(dateToCheck, new Date());\n}\n\nvar weekDay = [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"SÃ¡b\"];\n\nvar styleClassDay = function styleClassDay(inProp) {\n  var redThing = ['F', 0, 6];\n  return redThing.includes(inProp) ? \"tdF\" : \"\";\n};\n\nvar styleClassWeekDay = function styleClassWeekDay(inProp) {\n  var trClassList = {\n    0: 'trSunday',\n    1: 'trMonday',\n    2: 'trTuesday',\n    3: 'trWednesday',\n    4: 'trThursday',\n    5: 'trFriday',\n    6: 'trSaturday'\n  };\n  return trClassList[inProp.getDay()];\n};\n\nvar styleClassToday = function styleClassToday(inProp) {\n  return isToday(inProp) ? \"tdToday\" : \"\";\n};\n\nvar eventClick = function eventClick(inLog) {\n  console.log(\"Click:\" + inLog);\n  trackEvent('Click', inLog, 'label2');\n  return true;\n};\n\nvar yearTD = function yearTD(day) {\n  return React.createElement(\"th\", {\n    className: 'tdDate',\n    onClick: function onClick() {\n      return eventClick(\"Ano\" + day.getFullYear());\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, day.getFullYear());\n};\n\nvar weekDayTD = function weekDayTD(day) {\n  var wd = day.getDay();\n  var weekLabel = weekDay[wd].toUpperCase();\n  return React.createElement(\"td\", {\n    className: [styleClassDay(wd), 'tdWeekCol'].join(' '),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, weekLabel);\n};\n\nvar dayTDfunc = function dayTDfunc(day) {\n  return day.schedule.map(function (scale, i) {\n    return React.createElement(\"td\", {\n      key: i,\n      className: ['tdDayCol' + i, styleClassDay(scale)].join(' '),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, scale);\n  });\n};\n\nfunction thGroupClick(i, groupName) {\n  //alert(i + 'aab:' + groupName);\n  var shadesEl = document.querySelectorAll('.tdDayCol' + i).forEach(function (el) {\n    el.classList.toggle('backSelected');\n  });\n}\n\nvar groupsTD = function groupsTD(groups) {\n  return groups.map(function (groupName, i) {\n    return React.createElement(\"th\", {\n      key: i,\n      onClick: function onClick() {\n        thGroupClick(i, groupName);\n        eventClick(\"Grupo \" + groupName);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, groupName);\n  });\n};\n\nvar daysTR = function daysTR(daysIn) {\n  return daysIn.map(function (day, i) {\n    return React.createElement(\"tr\", {\n      key: i,\n      className: [styleClassWeekDay(day.day), 'trTable'].join(' '),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      key: i,\n      className: ['tdDate', styleClassToday(day.day)].join(' '),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \" \", DateToStringFormated(day.day)), weekDayTD(day.day), dayTDfunc(day));\n  });\n};\n/* <th>{objMonthScales[0].day.toLocaleDateString(\"pt\")}</th> */\n\n\nvar monthTRHeader = function monthTRHeader(objMonthScales) {\n  return React.createElement(\"tr\", {\n    className: 'trHead',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, yearTD(objMonthScales[0].day), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"\\xA0\"), groupsTD(objMonthScales[0].groups));\n};\n\nvar monthTRsComplete = function monthTRsComplete(daysIn) {\n  return [monthTRHeader(daysIn), daysTR(daysIn)];\n};\n\nvar tBodyTable = function tBodyTable(monthsTRsIn) {\n  return React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, monthsTRsIn);\n};\n\nfunction getDistFromBottom() {\n  var scrollPosition = window.pageYOffset;\n  var windowSize = window.innerHeight;\n  var bodyHeight = document.body.offsetHeight;\n  return Math.max(bodyHeight - (scrollPosition + windowSize), 0);\n}\n\nvar Tabela2 =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Tabela2, _React$Component);\n\n  function Tabela2(props) {\n    var _this;\n\n    _classCallCheck(this, Tabela2);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Tabela2).call(this, props));\n    var tableName = _this.props.tableName;\n\n    _this.setState({\n      tableEra: tableName\n    });\n\n    _this.initTableComponent();\n\n    return _this;\n  }\n\n  _createClass(Tabela2, [{\n    key: \"initTableComponent\",\n    value: function initTableComponent() {\n      var tableName = this.props.tableName;\n      tabelaGear.populateTableDate(tableName);\n      var dateIn = new Date(); // GetToday\n\n      var days = tabelaGear.getMonthScales(dateIn);\n      var beforeFirstMonthDay = new Date(dateIn.getFullYear(), dateIn.getMonth() - 1, 1);\n      var daysbefore = tabelaGear.getMonthScales(beforeFirstMonthDay);\n      this.state = {\n        tableInput: tableName,\n        dayOne: dateIn,\n        actualDay: dateIn,\n        monthsTRs: [monthTRsComplete(daysbefore), monthTRsComplete(days)]\n      };\n    }\n  }, {\n    key: \"tick\",\n    value: function tick() {\n      var dateIn = this.state.actualDay;\n      var nextFirstMonthDay = new Date(dateIn.getFullYear(), dateIn.getMonth() + 1, 1);\n      var nextMonthScale = tabelaGear.getMonthScales(nextFirstMonthDay);\n      this.setState({\n        monthsTRs: [].concat(_toConsumableArray(this.state.monthsTRs), [monthTRsComplete(nextMonthScale)]),\n        actualDay: nextFirstMonthDay\n      }); // Track month loading\n\n      var trackAction = dateIn.getFullYear() + \"-\" + (dateIn.getMonth() + 1);\n      console.log(trackAction);\n      trackEvent('Navigation', trackAction, 'label3');\n    }\n  }, {\n    key: \"handleScroll\",\n    value: function handleScroll() {\n      console.log(\"Inventa coisa com tua familia\");\n      var distToBottom = getDistFromBottom();\n\n      if (distToBottom > 0 && distToBottom <= 1400) {\n        // Near end;\n        var extTick = this.tick.bind(this);\n        extTick();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('scroll', this.handleScroll.bind(this));\n      var timer = setTimeout(function () {\n        // Wait 50ms and set scrool to TODAY\n        window.scrollTo(0, document.getElementsByClassName(\"tdToday\")[0].offsetTop - 135); //era 88 \n      }, 50);\n      var extTick = this.tick.bind(this); // To use method in next line\n\n      extTick(); // Load next month as DidMount.\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.tableName !== prevProps.tableName) {\n        console.log(\"EEEEEE\");\n        this.initTableComponent();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      //\n      console.log(\"THIS PROPS\");\n      console.log(this.props.tableName);\n      console.log(\"ERA\");\n      console.log(this.state.tableName);\n      return (\n        /* <div className=\"tbContainer\">*/\n        React.createElement(\"table\", {\n          className: 'tbMain',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, tBodyTable(this.state.monthsTRs))\n        /*</div>*/\n\n      );\n    }\n  }]);\n\n  return Tabela2;\n}(React.Component);\n\nTabela2.propTypes = {//classes: PropTypes.object.isRequired,\n};\nexport default Tabela2;","map":{"version":3,"sources":["/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/src/tabela2.js"],"names":["React","tabelaGear","trackEvent","Date","prototype","addDays","days","date","valueOf","setDate","getDate","DateToStringFormated","toLocaleDateString","day","month","replace","isSameDay","dateToCheck","dateToCheck2","getMonth","getFullYear","isToday","weekDay","styleClassDay","inProp","redThing","includes","styleClassWeekDay","trClassList","getDay","styleClassToday","eventClick","inLog","console","log","yearTD","weekDayTD","wd","weekLabel","toUpperCase","join","dayTDfunc","schedule","map","scale","i","thGroupClick","groupName","shadesEl","document","querySelectorAll","forEach","el","classList","toggle","groupsTD","groups","daysTR","daysIn","monthTRHeader","objMonthScales","monthTRsComplete","tBodyTable","monthsTRsIn","getDistFromBottom","scrollPosition","window","pageYOffset","windowSize","innerHeight","bodyHeight","body","offsetHeight","Math","max","Tabela2","props","tableName","setState","tableEra","initTableComponent","populateTableDate","dateIn","getMonthScales","beforeFirstMonthDay","daysbefore","state","tableInput","dayOne","actualDay","monthsTRs","nextFirstMonthDay","nextMonthScale","trackAction","distToBottom","extTick","tick","bind","addEventListener","handleScroll","timer","setTimeout","scrollTo","getElementsByClassName","offsetTop","prevProps","Component","propTypes"],"mappings":"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","sourcesContent":["import React from 'react';\nimport tabelaGear from './tableGear';\nimport { trackEvent } from './analytics';\n\n\n\n\nDate.prototype.addDays = function(days) {\n    var date = new Date(this.valueOf());\n    date.setDate(date.getDate() + days);\n    return date;\n}\n\nfunction DateToStringFormated(date) {\n    return date.toLocaleDateString(\"pt\", {\n        day: \"2-digit\",\n        month: 'short'\n    }).replace(\" de \", \"/\")\n      .replace(\".\",\"\"); //  Remove period on end of month at Chrome browser;\n}\n\nfunction isSameDay(dateToCheck, dateToCheck2) {\n    return (dateToCheck.getDate() === dateToCheck2.getDate() \n        && dateToCheck.getMonth() === dateToCheck2.getMonth()\n        && dateToCheck.getFullYear() === dateToCheck2.getFullYear());\n}\n\nfunction isToday(dateToCheck) {\n    return isSameDay(dateToCheck, (new Date()));\n}\n\nconst weekDay = [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"SÃ¡b\"];\n\nconst styleClassDay = function(inProp) {\n    let redThing = ['F', 0, 6];\n    return redThing.includes(inProp) ? \"tdF\" : \"\";\n};\n\nconst styleClassWeekDay = function(inProp) {\n    let trClassList = {0: 'trSunday', 1: 'trMonday', 2: 'trTuesday', 3: 'trWednesday', 4: 'trThursday', 5: 'trFriday', 6: 'trSaturday'};\n    return trClassList[inProp.getDay()]\n};\nconst styleClassToday = function(inProp) {\n    return isToday(inProp) ? \"tdToday\": \"\";\n}\nconst eventClick = function(inLog) {\n    console.log(\"Click:\" + inLog);\n    trackEvent('Click', inLog, 'label2');\n    return true;\n}\nconst yearTD = (day) => <th className={'tdDate'} onClick={() => eventClick(\"Ano\"+day.getFullYear())}>{day.getFullYear()}</th>;\nconst weekDayTD = (day) => {           \n    let wd = day.getDay();\n    let weekLabel = weekDay[wd].toUpperCase();\n    return <td className={[styleClassDay(wd), 'tdWeekCol'].join(' ')}>{weekLabel}</td>\n}\nconst dayTDfunc = (day) =>\n            day.schedule.map(\n                (scale, i) => \n                    <td key={i} className={['tdDayCol' + i, styleClassDay(scale)].join(' ')}>{scale}</td>\n            );\n\nfunction thGroupClick(i, groupName) {\n    //alert(i + 'aab:' + groupName);\n    let shadesEl = document.querySelectorAll('.tdDayCol' + i).forEach(function (el) {\n        el.classList.toggle('backSelected');\n    });\n} \n\nconst groupsTD = (groups) => \n    groups.map((groupName, i) =>\n        <th key={i} onClick={() => { thGroupClick(i, groupName); eventClick(\"Grupo \"+groupName);}}>{groupName}</th>\n    );\n\nconst daysTR = (daysIn) => daysIn.map((day, i) =>\n    <tr key={i} className={[styleClassWeekDay(day.day), 'trTable'].join(' ')}>\n    <td key={i} className={['tdDate', styleClassToday(day.day)].join(' ')} > {DateToStringFormated(day.day)}</td> \n        {weekDayTD(day.day)} \n        {dayTDfunc(day)} \n    </tr>\n);\n\n/* <th>{objMonthScales[0].day.toLocaleDateString(\"pt\")}</th> */\nconst monthTRHeader = (objMonthScales) =>\n    (   \n        <tr className={'trHead'}>\n            {yearTD(objMonthScales[0].day)}\n            <th>&nbsp;</th> \n            {groupsTD(objMonthScales[0].groups)} \n        </tr> \n        \n    );\nconst monthTRsComplete = (daysIn) => ([monthTRHeader(daysIn), daysTR(daysIn)]);\nconst tBodyTable = (monthsTRsIn) =>  (<tbody>{monthsTRsIn}</tbody>)\n\n\nfunction getDistFromBottom () {\n  \n    var scrollPosition = window.pageYOffset;\n    var windowSize     = window.innerHeight;\n    var bodyHeight     = document.body.offsetHeight;\n    return Math.max(bodyHeight - (scrollPosition + windowSize), 0);  \n  }\n\n\nclass Tabela2 extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        const { tableName } = this.props;\n        this.setState({tableEra: tableName});\n        this.initTableComponent();\n\n    }\n\n    initTableComponent() {\n        const tableName = this.props.tableName;\n        \n        tabelaGear.populateTableDate(tableName);\n        const dateIn = new Date(); // GetToday\n        const days = tabelaGear.getMonthScales(dateIn);\n\n        let beforeFirstMonthDay = new Date(dateIn.getFullYear(), dateIn.getMonth()-1, 1);\n        let daysbefore = tabelaGear.getMonthScales(beforeFirstMonthDay);\n\n        this.state = { \n            tableInput: tableName,\n            dayOne: dateIn,\n            actualDay: dateIn,\n            monthsTRs: [monthTRsComplete(daysbefore), monthTRsComplete(days)],\n        }\n    }\n\n    tick()   {\n        const dateIn = this.state.actualDay;\n        let nextFirstMonthDay = new Date(dateIn.getFullYear(), dateIn.getMonth()+1, 1);\n        let nextMonthScale = tabelaGear.getMonthScales(nextFirstMonthDay);\n\n        this.setState({\n            monthsTRs: [\n                ...this.state.monthsTRs,\n                monthTRsComplete(nextMonthScale)\n             ],\n             actualDay: nextFirstMonthDay\n         });\n        \n        // Track month loading\n        let trackAction = dateIn.getFullYear()+\"-\"+(dateIn.getMonth()+1);\n        console.log(trackAction);\n        trackEvent('Navigation', trackAction, 'label3');   \n     }\n\n     handleScroll() {\n        console.log(\"Inventa coisa com tua familia\");\n        let distToBottom = getDistFromBottom();\n        if (distToBottom > 0 && distToBottom <= 1400) { // Near end;\n            let extTick = this.tick.bind(this);\n            extTick();\n        }\n     }\n\n    componentDidMount() {\n        \n        document.addEventListener('scroll', this.handleScroll.bind(this));\n    \n        let timer = setTimeout(function () { // Wait 50ms and set scrool to TODAY\n            window.scrollTo(0, document.getElementsByClassName(\"tdToday\")[0].offsetTop - 135); //era 88 \n        }, 50);\n        \n        let extTick = this.tick.bind(this); // To use method in next line\n        extTick(); // Load next month as DidMount.\n    }\n\n    \n    componentDidUpdate(prevProps) {\n        if (this.props.tableName !== prevProps.tableName) {\n          console.log(\"EEEEEE\");\n          this.initTableComponent();\n        }\n      }\n    render() {  \n        //\n        console.log(\"THIS PROPS\");\n        console.log(this.props.tableName);\n        console.log(\"ERA\");\n        console.log(this.state.tableName);\n        return ( \n            /* <div className=\"tbContainer\">*/\n            <table className={'tbMain'}>\n                {tBodyTable(this.state.monthsTRs)}\n            </table>\n            /*</div>*/\n        )\n    }\n}\n\n\nTabela2.propTypes = {\n    //classes: PropTypes.object.isRequired,\n};\n\n\nexport default Tabela2;"]},"metadata":{},"sourceType":"module"}