{"ast":null,"code":"import _toConsumableArray from\"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import tabelaGear from'./tableGear';import{trackEvent}from'./analytics';Date.prototype.addDays=function(days){var date=new Date(this.valueOf());date.setDate(date.getDate()+days);return date;};function DateToStringFormated(date){return date.toLocaleDateString(\"pt\",{day:\"2-digit\",month:'short'}).replace(\" de \",\"/\").replace(\".\",\"\");//  Remove period on end of month at Chrome browser;\n}function isSameDay(dateToCheck,dateToCheck2){return dateToCheck.getDate()===dateToCheck2.getDate()&&dateToCheck.getMonth()===dateToCheck2.getMonth()&&dateToCheck.getFullYear()===dateToCheck2.getFullYear();}function isToday(dateToCheck){return isSameDay(dateToCheck,new Date());}var weekDay=[\"Dom\",\"Seg\",\"Ter\",\"Qua\",\"Qui\",\"Sex\",\"Sáb\"];var styleClassDay=function styleClassDay(inProp){var redThing=['F',0,6];return redThing.includes(inProp)?\"tdF\":\"\";};var styleClassWeekDay=function styleClassWeekDay(inProp){var trClassList={0:'trSunday',1:'trMonday',2:'trTuesday',3:'trWednesday',4:'trThursday',5:'trFriday',6:'trSaturday'};return trClassList[inProp.getDay()];};var styleClassToday=function styleClassToday(inProp){return isToday(inProp)?\"tdToday\":\"\";};var eventClick=function eventClick(inLog){console.log(\"Click:\"+inLog);trackEvent('Click',inLog,'label2');return true;};var yearTD=function yearTD(day){return React.createElement(\"th\",{className:'tdDate',onClick:function onClick(){return eventClick(\"Ano\"+day.getFullYear());}},day.getFullYear());};var weekDayTD=function weekDayTD(day){var wd=day.getDay();var weekLabel=weekDay[wd].toUpperCase();return React.createElement(\"td\",{className:[styleClassDay(wd),'tdWeekCol'].join(' ')},weekLabel);};var dayTDfunc=function dayTDfunc(day){return day.schedule.map(function(scale,i){return React.createElement(\"td\",{key:i,className:['tdDayCol'+i,styleClassDay(scale)].join(' ')},scale);});};function thGroupClick(i,groupName){//alert(i + 'aab:' + groupName);\nvar shadesEl=document.querySelectorAll('.tdDayCol'+i).forEach(function(el){el.classList.toggle('backSelected');});eventClick(\"Grupo \"+groupName);}var groupsTD=function groupsTD(groups){return groups.map(function(groupName,i){return React.createElement(\"th\",{key:i,onClick:function onClick(){thGroupClick(i,groupName);}},groupName);});};var daysTR=function daysTR(daysIn){return daysIn.map(function(day,i){return React.createElement(\"tr\",{key:i,className:[styleClassWeekDay(day.day),'trTable'].join(' ')},React.createElement(\"td\",{key:i,className:['tdDate',styleClassToday(day.day)].join(' ')},\" \",DateToStringFormated(day.day)),weekDayTD(day.day),dayTDfunc(day));});};/* <th>{objMonthScales[0].day.toLocaleDateString(\"pt\")}</th> */var monthTRHeader=function monthTRHeader(objMonthScales){return React.createElement(\"tr\",{className:'trHead'},yearTD(objMonthScales[0].day),React.createElement(\"th\",null,\"\\xA0\"),groupsTD(objMonthScales[0].groups));};var monthTRsComplete=function monthTRsComplete(daysIn){return[monthTRHeader(daysIn),daysTR(daysIn)];};var tBodyTable=function tBodyTable(monthsTRsIn){return React.createElement(\"tbody\",null,monthsTRsIn);};function getDistFromBottom(){var scrollPosition=window.pageYOffset;var windowSize=window.innerHeight;var bodyHeight=document.body.offsetHeight;return Math.max(bodyHeight-(scrollPosition+windowSize),0);}var Tabela2=/*#__PURE__*/function(_React$Component){_inherits(Tabela2,_React$Component);function Tabela2(props){var _this;_classCallCheck(this,Tabela2);_this=_possibleConstructorReturn(this,_getPrototypeOf(Tabela2).call(this,props));var tableName=_this.props.tableName;_this.setState({tableEra:tableName});_this.initTableComponent();return _this;}_createClass(Tabela2,[{key:\"initTableComponent\",value:function initTableComponent(){var tableName=this.props.tableName;tabelaGear.populateTableDate(tableName);var dateIn=new Date();// GetToday\nvar days=tabelaGear.getMonthScales(dateIn);var beforeFirstMonthDay=new Date(dateIn.getFullYear(),dateIn.getMonth()-1,1);var daysbefore=tabelaGear.getMonthScales(beforeFirstMonthDay);this.state={tableInput:tableName,dayOne:dateIn,actualDay:dateIn,monthsTRs:[monthTRsComplete(daysbefore),monthTRsComplete(days)]};}},{key:\"tick\",value:function tick(){var dateIn=this.state.actualDay;var nextFirstMonthDay=new Date(dateIn.getFullYear(),dateIn.getMonth()+1,1);var nextMonthScale=tabelaGear.getMonthScales(nextFirstMonthDay);this.setState({monthsTRs:[].concat(_toConsumableArray(this.state.monthsTRs),[monthTRsComplete(nextMonthScale)]),actualDay:nextFirstMonthDay});// Track month loading\nvar trackAction=dateIn.getFullYear()+\"-\"+(dateIn.getMonth()+1);console.log(trackAction);trackEvent('Navigation',trackAction,'label3');}},{key:\"handleScroll\",value:function handleScroll(){var distToBottom=getDistFromBottom();if(distToBottom>0&&distToBottom<=1400){// Near end;\nvar extTick=this.tick.bind(this);extTick();}}},{key:\"componentDidMount\",value:function componentDidMount(){//console.log(this.props.groupSelected);\nvar txtGroupSeleced=this.props.groupSelected;if(txtGroupSeleced!=undefined){var xpath=\"//th[text()='\"+txtGroupSeleced+\"']\";var matchingElement=document.evaluate(xpath,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;matchingElement.click();console.log(\"Mathing\");console.log(matchingElement);}document.addEventListener('scroll',this.handleScroll.bind(this));var timer=setTimeout(function(){// Wait 50ms and set scrool to TODAY\nwindow.scrollTo(0,document.getElementsByClassName(\"tdToday\")[0].offsetTop-135);//era 88 \n},50);var extTick=this.tick.bind(this);// To use method in next line\nextTick();// Load next month as DidMount.\n}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.tableName!==prevProps.tableName){this.initTableComponent();var extTick=this.tick.bind(this);extTick();}}},{key:\"render\",value:function render(){return(/* <div className=\"tbContainer\">*/React.createElement(\"table\",{className:'tbMain'},tBodyTable(this.state.monthsTRs))/*</div>*/);}}]);return Tabela2;}(React.Component);export default Tabela2;","map":{"version":3,"sources":["/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/src/tabela2.js"],"names":["React","tabelaGear","trackEvent","Date","prototype","addDays","days","date","valueOf","setDate","getDate","DateToStringFormated","toLocaleDateString","day","month","replace","isSameDay","dateToCheck","dateToCheck2","getMonth","getFullYear","isToday","weekDay","styleClassDay","inProp","redThing","includes","styleClassWeekDay","trClassList","getDay","styleClassToday","eventClick","inLog","console","log","yearTD","weekDayTD","wd","weekLabel","toUpperCase","join","dayTDfunc","schedule","map","scale","i","thGroupClick","groupName","shadesEl","document","querySelectorAll","forEach","el","classList","toggle","groupsTD","groups","daysTR","daysIn","monthTRHeader","objMonthScales","monthTRsComplete","tBodyTable","monthsTRsIn","getDistFromBottom","scrollPosition","window","pageYOffset","windowSize","innerHeight","bodyHeight","body","offsetHeight","Math","max","Tabela2","props","tableName","setState","tableEra","initTableComponent","populateTableDate","dateIn","getMonthScales","beforeFirstMonthDay","daysbefore","state","tableInput","dayOne","actualDay","monthsTRs","nextFirstMonthDay","nextMonthScale","trackAction","distToBottom","extTick","tick","bind","txtGroupSeleced","groupSelected","undefined","xpath","matchingElement","evaluate","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","click","addEventListener","handleScroll","timer","setTimeout","scrollTo","getElementsByClassName","offsetTop","prevProps","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport tabelaGear from './tableGear';\nimport { trackEvent } from './analytics';\n\n\n\n\nDate.prototype.addDays = function(days) {\n    var date = new Date(this.valueOf());\n    date.setDate(date.getDate() + days);\n    return date;\n}\n\nfunction DateToStringFormated(date) {\n    return date.toLocaleDateString(\"pt\", {\n        day: \"2-digit\",\n        month: 'short'\n    }).replace(\" de \", \"/\")\n      .replace(\".\",\"\"); //  Remove period on end of month at Chrome browser;\n}\n\nfunction isSameDay(dateToCheck, dateToCheck2) {\n    return (dateToCheck.getDate() === dateToCheck2.getDate() \n        && dateToCheck.getMonth() === dateToCheck2.getMonth()\n        && dateToCheck.getFullYear() === dateToCheck2.getFullYear());\n}\n\nfunction isToday(dateToCheck) {\n    return isSameDay(dateToCheck, (new Date()));\n}\n\nconst weekDay = [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sáb\"];\n\nconst styleClassDay = function(inProp) {\n    let redThing = ['F', 0, 6];\n    return redThing.includes(inProp) ? \"tdF\" : \"\";\n};\n\nconst styleClassWeekDay = function(inProp) {\n    let trClassList = {0: 'trSunday', 1: 'trMonday', 2: 'trTuesday', 3: 'trWednesday', 4: 'trThursday', 5: 'trFriday', 6: 'trSaturday'};\n    return trClassList[inProp.getDay()]\n};\nconst styleClassToday = function(inProp) {\n    return isToday(inProp) ? \"tdToday\": \"\";\n}\nconst eventClick = function(inLog) {\n    console.log(\"Click:\" + inLog);\n    trackEvent('Click', inLog, 'label2');\n    return true;\n}\nconst yearTD = (day) => <th className={'tdDate'} onClick={() => eventClick(\"Ano\"+day.getFullYear())}>{day.getFullYear()}</th>;\nconst weekDayTD = (day) => {           \n    let wd = day.getDay();\n    let weekLabel = weekDay[wd].toUpperCase();\n    return <td className={[styleClassDay(wd), 'tdWeekCol'].join(' ')}>{weekLabel}</td>\n}\nconst dayTDfunc = (day) =>\n            day.schedule.map(\n                (scale, i) => \n                    <td key={i} className={['tdDayCol' + i, styleClassDay(scale)].join(' ')}>{scale}</td>\n            );\n\nfunction thGroupClick(i, groupName) {\n    //alert(i + 'aab:' + groupName);\n    let shadesEl = document.querySelectorAll('.tdDayCol' + i).forEach(function (el) {\n        el.classList.toggle('backSelected');\n    });\n    eventClick(\"Grupo \"+groupName);\n    \n} \n\nconst groupsTD = (groups) => \n    groups.map((groupName, i) =>\n        <th key={i} onClick={() => { thGroupClick(i, groupName); }}>{groupName}</th>\n    );\n\nconst daysTR = (daysIn) => daysIn.map((day, i) =>\n    <tr key={i} className={[styleClassWeekDay(day.day), 'trTable'].join(' ')}>\n    <td key={i} className={['tdDate', styleClassToday(day.day)].join(' ')} > {DateToStringFormated(day.day)}</td> \n        {weekDayTD(day.day)} \n        {dayTDfunc(day)} \n    </tr>\n);\n\n/* <th>{objMonthScales[0].day.toLocaleDateString(\"pt\")}</th> */\nconst monthTRHeader = (objMonthScales) =>\n    (   \n        <tr className={'trHead'}>\n            {yearTD(objMonthScales[0].day)}\n            <th>&nbsp;</th> \n            {groupsTD(objMonthScales[0].groups)} \n        </tr> \n        \n    );\nconst monthTRsComplete = (daysIn) => ([monthTRHeader(daysIn), daysTR(daysIn)]);\nconst tBodyTable = (monthsTRsIn) =>  (<tbody>{monthsTRsIn}</tbody>)\n\n\nfunction getDistFromBottom () {\n  \n    var scrollPosition = window.pageYOffset;\n    var windowSize     = window.innerHeight;\n    var bodyHeight     = document.body.offsetHeight;\n    return Math.max(bodyHeight - (scrollPosition + windowSize), 0);  \n  }\n\n\nclass Tabela2 extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        const { tableName } = this.props;\n        this.setState({tableEra: tableName});\n        this.initTableComponent();\n\n    }\n\n    initTableComponent() {\n        const tableName = this.props.tableName;\n        \n        tabelaGear.populateTableDate(tableName);\n        const dateIn = new Date(); // GetToday\n        const days = tabelaGear.getMonthScales(dateIn);\n\n        let beforeFirstMonthDay = new Date(dateIn.getFullYear(), dateIn.getMonth()-1, 1);\n        let daysbefore = tabelaGear.getMonthScales(beforeFirstMonthDay);\n\n        this.state = { \n            tableInput: tableName,\n            dayOne: dateIn,\n            actualDay: dateIn,\n            monthsTRs: [monthTRsComplete(daysbefore), monthTRsComplete(days)],\n        }\n    }\n\n    tick()   {\n        const dateIn = this.state.actualDay;\n        let nextFirstMonthDay = new Date(dateIn.getFullYear(), dateIn.getMonth()+1, 1);\n        let nextMonthScale = tabelaGear.getMonthScales(nextFirstMonthDay);\n\n        this.setState({\n            monthsTRs: [\n                ...this.state.monthsTRs,\n                monthTRsComplete(nextMonthScale)\n             ],\n             actualDay: nextFirstMonthDay\n         });\n        \n        // Track month loading\n        let trackAction = dateIn.getFullYear()+\"-\"+(dateIn.getMonth()+1);\n        console.log(trackAction);\n        trackEvent('Navigation', trackAction, 'label3');   \n     }\n\n     handleScroll() {\n        let distToBottom = getDistFromBottom();\n        if (distToBottom > 0 && distToBottom <= 1400) { // Near end;\n            let extTick = this.tick.bind(this);\n            extTick();\n        }\n     }\n\n    componentDidMount() {\n\n        //console.log(this.props.groupSelected);\n        \n        let txtGroupSeleced = this.props.groupSelected;\n        if (txtGroupSeleced != undefined) {\n            var xpath = \"//th[text()='\" + txtGroupSeleced + \"']\";\n            var matchingElement = document.evaluate(xpath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n            matchingElement.click();\n            console.log(\"Mathing\");\n            console.log(matchingElement);\n        }\n        \n        document.addEventListener('scroll', this.handleScroll.bind(this));\n    \n        let timer = setTimeout(function () { // Wait 50ms and set scrool to TODAY\n            window.scrollTo(0, document.getElementsByClassName(\"tdToday\")[0].offsetTop - 135); //era 88 \n        }, 50);\n        \n        let extTick = this.tick.bind(this); // To use method in next line\n        extTick(); // Load next month as DidMount.\n    }\n\n    \n    componentDidUpdate(prevProps) {\n        if (this.props.tableName !== prevProps.tableName) {\n          this.initTableComponent();\n          let extTick = this.tick.bind(this);\n          extTick();\n        }\n      }\n\n    render() {  \n\n        return ( \n            /* <div className=\"tbContainer\">*/\n            <table className={'tbMain'}>\n                {tBodyTable(this.state.monthsTRs)}\n            </table>\n            /*</div>*/\n        )\n    }\n}\n\n\nTabela2.propTypes = {\n    //classes: PropTypes.object.isRequired,\n};\n\n\nexport default Tabela2;"]},"metadata":{},"sourceType":"module"}