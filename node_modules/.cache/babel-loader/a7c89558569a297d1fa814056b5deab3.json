{"ast":null,"code":"import _classCallCheck from \"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/src/tabela2.js\";\nimport React from 'react';\nimport tabelaGear from './tableGear';\nimport { trackEvent } from './analytics';\n\nDate.prototype.addDays = function (days) {\n  var date = new Date(this.valueOf());\n  date.setDate(date.getDate() + days);\n  return date;\n};\n\nfunction DateToStringFormated(date) {\n  return date.toLocaleDateString(\"pt\", {\n    day: \"2-digit\",\n    month: 'short'\n  }).replace(\" de \", \"/\");\n}\n\nfunction isSameDay(dateToCheck, dateToCheck2) {\n  return dateToCheck.getDate() === dateToCheck2.getDate() && dateToCheck.getMonth() === dateToCheck2.getMonth() && dateToCheck.getFullYear() === dateToCheck2.getFullYear();\n}\n\nfunction isToday(dateToCheck) {\n  return isSameDay(dateToCheck, new Date());\n}\n\nvar weekDay = [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sáb\"];\n\nvar styleClassDay = function styleClassDay(inProp) {\n  var redThing = ['F', 0, 6];\n  return redThing.includes(inProp) ? \"tdF\" : \"\";\n};\n\nvar styleClassWeekDay = function styleClassWeekDay(inProp) {\n  var trClassList = {\n    0: 'trSunday',\n    1: 'trMonday',\n    2: 'trTuesday',\n    3: 'trWednesday',\n    4: 'trThursday',\n    5: 'trFriday',\n    6: 'trSaturday'\n  };\n  return trClassList[inProp.getDay()];\n};\n\nvar styleClassToday = function styleClassToday(inProp) {\n  return isToday(inProp) ? \"tdToday\" : \"\";\n};\n\nvar eventClick = function eventClick(inLog) {\n  console.log(\"Click:\" + inLog);\n  trackEvent('Click', inLog, 'label2');\n  return true;\n};\n\nvar yearTD = function yearTD(day) {\n  return React.createElement(\"th\", {\n    className: 'tdDate',\n    onClick: function onClick() {\n      return eventClick(\"Ano\" + day.getFullYear());\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, day.getFullYear());\n};\n\nvar weekDayTD = function weekDayTD(day) {\n  var wd = day.getDay();\n  var weekLabel = weekDay[wd].toUpperCase();\n  return React.createElement(\"td\", {\n    className: [styleClassDay(wd), 'tdWeekCol'].join(' '),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, weekLabel);\n};\n\nvar dayTDfunc = function dayTDfunc(day) {\n  return day.schedule.map(function (scale, i) {\n    return React.createElement(\"td\", {\n      key: i,\n      className: styleClassDay(scale),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, scale);\n  });\n};\n\nfunction thGroupClick(i, groupName) {//alert(i + 'aab:' + groupName);\n}\n\nvar groupsTD = function groupsTD(groups) {\n  return groups.map(function (groupName, i) {\n    return React.createElement(\"th\", {\n      key: i,\n      onClick: function onClick() {\n        thGroupClick(i, groupName);\n        eventClick(\"Grupo \" + groupName);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, groupName);\n  });\n};\n\nvar daysTR = function daysTR(daysIn) {\n  return daysIn.map(function (day, i) {\n    return React.createElement(\"tr\", {\n      key: i,\n      className: [styleClassWeekDay(day.day), 'trTable'].join(' '),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      key: i,\n      className: ['tdDate', styleClassToday(day.day)].join(' '),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \" \", DateToStringFormated(day.day)), weekDayTD(day.day), dayTDfunc(day));\n  });\n};\n/* <th>{objMonthScales[0].day.toLocaleDateString(\"pt\")}</th> */\n\n\nvar monthTRHeader = function monthTRHeader(objMonthScales) {\n  return React.createElement(\"tr\", {\n    className: 'trHead',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, yearTD(objMonthScales[0].day), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"\\xA0\"), groupsTD(objMonthScales[0].groups));\n};\n\nvar monthTRsComplete = function monthTRsComplete(daysIn) {\n  return [monthTRHeader(daysIn), daysTR(daysIn)];\n};\n\nvar tBodyTable = function tBodyTable(monthsTRsIn) {\n  return React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, monthsTRsIn);\n};\n\nfunction getDistFromBottom() {\n  var scrollPosition = window.pageYOffset;\n  var windowSize = window.innerHeight;\n  var bodyHeight = document.body.offsetHeight;\n  return Math.max(bodyHeight - (scrollPosition + windowSize), 0);\n}\n\ndocument.addEventListener('scroll', function () {\n  var distToBottom = getDistFromBottom();\n\n  if (distToBottom > 0 && distToBottom <= 1000) {// Near end;\n  }\n});\n\nvar Tabela2 =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Tabela2, _React$Component);\n\n  function Tabela2(props) {\n    var _this;\n\n    _classCallCheck(this, Tabela2);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Tabela2).call(this, props));\n    var _this$props = _this.props,\n        month = _this$props.month,\n        tableName = _this$props.tableName;\n    tabelaGear.populateTableDate(tableName);\n    var dateIn = new Date(); // GetToday\n\n    var days = tabelaGear.getMonthScales(dateIn);\n    var beforeFirstMounthDay = new Date(dateIn.getFullYear(), dateIn.getMonth() - 1, 1);\n    var daysbefore = tabelaGear.getMonthScales(beforeFirstMounthDay);\n    _this.state = {\n      tableInput: tableName,\n      dayOne: dateIn,\n      actualDay: dateIn,\n      monthsTRs: [monthTRsComplete(daysbefore), monthTRsComplete(days)]\n    }; //Load more 1 month\n\n    var extTick = _this.tick.bind(_assertThisInitialized(_this));\n\n    extTick();\n    return _this;\n  }\n\n  _createClass(Tabela2, [{\n    key: \"tick\",\n    value: function tick() {\n      var dateIn = this.state.actualDay;\n      var nextFirstMounthDay = new Date(dateIn.getFullYear(), dateIn.getMonth() + 1, 1);\n      var nextMonthScale = tabelaGear.getMonthScales(nextFirstMounthDay);\n      var newMonthsObj = this.state.monthsTRs;\n      newMonthsObj.push(monthTRsComplete(nextMonthScale));\n      this.setState({\n        actualDay: nextFirstMounthDay,\n        monthsTRs: newMonthsObj\n      }); // Track month loading\n      //let trackAction = dateIn.getFullYear()+\"-\"+(dateIn.getMonth()+1);\n      //console.log(trackAction);\n      //trackEvent('Navigation', trackAction, 'label1');\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var extTick = this.tick.bind(this);\n      document.addEventListener('scroll', function () {\n        var distToBottom = getDistFromBottom(); //console.log(distToBottom);\n\n        if (distToBottom > 0 && distToBottom <= 1400) {\n          // Near end;\n          console.log('dentro do reac');\n          extTick();\n        }\n      });\n      var timer = setTimeout(function () {\n        window.scrollTo(0, document.getElementsByClassName(\"tdToday\")[0].offsetTop - 135); //era 88 \n      }, 50);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return (\n        /* <div className=\"tbContainer\">*/\n        React.createElement(\"table\", {\n          className: 'tbMain',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, tBodyTable(this.state.monthsTRs))\n        /*</div>*/\n\n      );\n    }\n  }]);\n\n  return Tabela2;\n}(React.Component);\n\nTabela2.propTypes = {//classes: PropTypes.object.isRequired,\n};\nexport default Tabela2;","map":{"version":3,"sources":["/Users/angelomaraujo/gits/TabelaTurno_WORKDIR/TabelaTurno/src/tabela2.js"],"names":["React","tabelaGear","trackEvent","Date","prototype","addDays","days","date","valueOf","setDate","getDate","DateToStringFormated","toLocaleDateString","day","month","replace","isSameDay","dateToCheck","dateToCheck2","getMonth","getFullYear","isToday","weekDay","styleClassDay","inProp","redThing","includes","styleClassWeekDay","trClassList","getDay","styleClassToday","eventClick","inLog","console","log","yearTD","weekDayTD","wd","weekLabel","toUpperCase","join","dayTDfunc","schedule","map","scale","i","thGroupClick","groupName","groupsTD","groups","daysTR","daysIn","monthTRHeader","objMonthScales","monthTRsComplete","tBodyTable","monthsTRsIn","getDistFromBottom","scrollPosition","window","pageYOffset","windowSize","innerHeight","bodyHeight","document","body","offsetHeight","Math","max","addEventListener","distToBottom","Tabela2","props","tableName","populateTableDate","dateIn","getMonthScales","beforeFirstMounthDay","daysbefore","state","tableInput","dayOne","actualDay","monthsTRs","extTick","tick","bind","nextFirstMounthDay","nextMonthScale","newMonthsObj","push","setState","timer","setTimeout","scrollTo","getElementsByClassName","offsetTop","Component","propTypes"],"mappings":"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","sourcesContent":["import React from 'react';\nimport tabelaGear from './tableGear';\nimport { trackEvent } from './analytics';\n\n\n\n\nDate.prototype.addDays = function(days) {\n    var date = new Date(this.valueOf());\n    date.setDate(date.getDate() + days);\n    return date;\n}\n\nfunction DateToStringFormated(date) {\n    return date.toLocaleDateString(\"pt\", {\n        day: \"2-digit\",\n        month: 'short'\n    }).replace(\" de \", \"/\");\n}\n\nfunction isSameDay(dateToCheck, dateToCheck2) {\n    return (dateToCheck.getDate() === dateToCheck2.getDate() \n        && dateToCheck.getMonth() === dateToCheck2.getMonth()\n        && dateToCheck.getFullYear() === dateToCheck2.getFullYear());\n}\n\nfunction isToday(dateToCheck) {\n    return isSameDay(dateToCheck, (new Date()));\n}\n\nconst weekDay = [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sáb\"];\n\nconst styleClassDay = function(inProp) {\n    let redThing = ['F', 0, 6];\n    return redThing.includes(inProp) ? \"tdF\" : \"\";\n};\n\nconst styleClassWeekDay = function(inProp) {\n    let trClassList = {0: 'trSunday', 1: 'trMonday', 2: 'trTuesday', 3: 'trWednesday', 4: 'trThursday', 5: 'trFriday', 6: 'trSaturday'};\n    return trClassList[inProp.getDay()]\n};\nconst styleClassToday = function(inProp) {\n    return isToday(inProp) ? \"tdToday\": \"\";\n}\nconst eventClick = function(inLog) {\n    console.log(\"Click:\" + inLog);\n    trackEvent('Click', inLog, 'label2');\n    return true;\n}\nconst yearTD = (day) => <th className={'tdDate'} onClick={() => eventClick(\"Ano\"+day.getFullYear())}>{day.getFullYear()}</th>;\nconst weekDayTD = (day) => {           \n    let wd = day.getDay();\n    let weekLabel = weekDay[wd].toUpperCase();\n    return <td className={[styleClassDay(wd), 'tdWeekCol'].join(' ')}>{weekLabel}</td>\n}\nconst dayTDfunc = (day) =>\n            day.schedule.map(\n                (scale, i) => \n                    <td key={i} className={styleClassDay(scale)}>{scale}</td>\n            );\n\n    function thGroupClick(i, groupName) {\n        //alert(i + 'aab:' + groupName);\n\n    } \n\nconst groupsTD = (groups) => \n    groups.map((groupName, i) =>\n        <th key={i} onClick={() => { thGroupClick(i, groupName); eventClick(\"Grupo \"+groupName);}}>{groupName}</th>\n    );\nconst daysTR = (daysIn) => daysIn.map((day, i) =>\n    <tr key={i} className={[styleClassWeekDay(day.day), 'trTable'].join(' ')}>\n    <td key={i} className={['tdDate', styleClassToday(day.day)].join(' ')} > {DateToStringFormated(day.day)}</td> \n        {weekDayTD(day.day)} \n        {dayTDfunc(day)} \n    </tr>\n);\n\n/* <th>{objMonthScales[0].day.toLocaleDateString(\"pt\")}</th> */\nconst monthTRHeader = (objMonthScales) =>\n    (   \n        <tr className={'trHead'}>\n            {yearTD(objMonthScales[0].day)}\n            <th>&nbsp;</th> \n            {groupsTD(objMonthScales[0].groups)} \n        </tr> \n        \n    );\nconst monthTRsComplete = (daysIn) => ([monthTRHeader(daysIn), daysTR(daysIn)]);\nconst tBodyTable = (monthsTRsIn) =>  (<tbody>{monthsTRsIn}</tbody>)\n\n\nfunction getDistFromBottom () {\n  \n    var scrollPosition = window.pageYOffset;\n    var windowSize     = window.innerHeight;\n    var bodyHeight     = document.body.offsetHeight;\n    return Math.max(bodyHeight - (scrollPosition + windowSize), 0);  \n  }\n\ndocument.addEventListener('scroll', function() {\n    let distToBottom = getDistFromBottom();\n    if (distToBottom > 0 && distToBottom <= 1000) { // Near end;\n       \n    }\n});\n\n\n\n\nclass Tabela2 extends React.Component {\n\n    constructor(props) {\n        super(props);\n        \n        const { month, tableName } = this.props;\n\n        tabelaGear.populateTableDate(tableName);\n        const dateIn = new Date(); // GetToday\n        const days = tabelaGear.getMonthScales(dateIn);\n\n        let beforeFirstMounthDay = new Date(dateIn.getFullYear(), dateIn.getMonth()-1, 1);\n        let daysbefore = tabelaGear.getMonthScales(beforeFirstMounthDay);\n\n        \n        this.state = { \n            tableInput: tableName,\n            dayOne: dateIn,\n            actualDay: dateIn,\n            monthsTRs: [monthTRsComplete(daysbefore), monthTRsComplete(days)],\n        }\n        //Load more 1 month\n        const extTick = this.tick.bind(this);\n        extTick();\n    }\n\n    tick()   {\n        const dateIn = this.state.actualDay;\n        let nextFirstMounthDay = new Date(dateIn.getFullYear(), dateIn.getMonth()+1, 1);\n        let nextMonthScale = tabelaGear.getMonthScales(nextFirstMounthDay);\n        let newMonthsObj = this.state.monthsTRs;\n        newMonthsObj.push(monthTRsComplete(nextMonthScale));\n        this.setState({actualDay: nextFirstMounthDay, monthsTRs: newMonthsObj });\n        \n        // Track month loading\n        //let trackAction = dateIn.getFullYear()+\"-\"+(dateIn.getMonth()+1);\n        //console.log(trackAction);\n        //trackEvent('Navigation', trackAction, 'label1');\n         \n     }\n\n    componentDidMount() {\n        const extTick = this.tick.bind(this);\n        document.addEventListener('scroll', function() {\n            let distToBottom = getDistFromBottom();\n            //console.log(distToBottom);\n            if (distToBottom > 0 && distToBottom <= 1400) { // Near end;\n               console.log('dentro do reac');\n               extTick();\n            }\n        });\n    \n        let timer = setTimeout(function () {\n            window.scrollTo(0, document.getElementsByClassName(\"tdToday\")[0].offsetTop - 135); //era 88 \n        }, 50);\n        \n    }\n\n\n    render() {  \n        return ( \n            /* <div className=\"tbContainer\">*/\n            <table className={'tbMain'}>\n                {tBodyTable(this.state.monthsTRs)}\n            </table>\n            /*</div>*/\n        )\n    }\n}\n\n\nTabela2.propTypes = {\n    //classes: PropTypes.object.isRequired,\n};\n\n\nexport default Tabela2;"]},"metadata":{},"sourceType":"module"}